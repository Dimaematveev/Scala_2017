2. Потерявшийся пионер

В детском лагере переполох. Пионер Вася пошел гулять по лабиринту и вот уже долгое время не выходит оттуда. Ясно, что Вася заблудился. Вася начитанный мальчик и знает, что из лабиринта можно выбраться, если на развилках всегда поворачивать в одну и ту же сторону. Лабиринт представляет собой маленькие пронумерованные площадки и один или два перехода на соседние площадки. У лабиринта один вход и не менее одного выхода.

Более строго: лабиринт представляет ориентированый граф такой, что из каждой вершины выходит не более 2-х ребер. Причем, если из вершины выходит 2 ребра, одно из них называется левым, а другое — правым. Вершины пронумерованы числами от 0 до N - 1. Вершина с номером 0 является единственным входом в лабиринт. Существует хотя бы одна вершина, из которой не выходит ребер. Такая вершина называется выходом из лабиринта.

То, что Вася все еще не вышел из лабиринта, значит, что он ходит по лабиринту по кругу. Распечатайте в порядке возрастания номера площадок по которым кругами ходит пионер.

Входные данные:
В первой строке входного файла содержится одна буква обозначающая сторону, которой придерживается Вася. l — лево или r — право. В следующей строке содержится число N (1 ≤ N ≤ 10000) — число площадок в лабиринте. Следующие N строк содержат описание лабиринта, i-я из них описывает переходы из i-й площадки и содержит 1 или 2 числа. Если дано 2 числа l, r (0 ≤ l, r ≤ N - 1), то l — соседняя вершина, если пойти налево, а r — направо. Если же дано 1 число v (0 ≤ v ≤ N - 1), то из этой вершины есть ровно один переход в вершину с номером v. Если v = -1, то эта вершина является выходом из лабиринта.

Выходные данные:
В случае, если пионер не заблудился, выведите "no" (без кавычек). В противном случае выведите упорядоченный по возрастанию список номеров площадок.

Решение:
Считываем, идем по лабиринту, помечая посещенные вершины, когда приходим в посещенную вершину или выход, выводим цикл или сообщение о его отсутствии соответственно.